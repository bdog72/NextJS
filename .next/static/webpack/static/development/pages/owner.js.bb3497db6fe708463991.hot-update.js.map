{"version":3,"file":"static/webpack/static/development/pages/owner.js.bb3497db6fe708463991.hot-update.js","sources":["webpack:///./components/hoc/withAuth.js"],"sourcesContent":["import React from 'react';\nimport BaseLayout from '../layouts/BaseLayout';\nimport BasePage from '../BasePage';\n\nconst namespace = 'http://localhost:3000/';\n\nexport default role => Component =>\n  class withAuth extends React.Component {\n    static async getInitialProps(args) {\n      const pageProps =\n        (await Component.getInitialProps) &&\n        (await Component.getInitialProps(args));\n\n      return { ...pageProps };\n    }\n\n    renderProtectedPage() {\n      const { isAuthenticated, user } = this.props.auth;\n      const userRole = user && user[`${namespace}role`];\n\n      let isAuthorized = false;\n\n      if (role) {\n        if (userRole && userRole === role) {\n          isAuthorized = true;\n        }\n      } else {\n        isAuthorized = true;\n      }\n\n      if (!isAuthenticated) {\n        return (\n          <BaseLayout {...this.props.auth}>\n            <BasePage>\n              <h1>\n                You are not authenticated. Please login to view this page{' '}\n              </h1>\n            </BasePage>\n          </BaseLayout>\n        );\n      } else if (!isAuthorized) {\n        return (\n          <BaseLayout {...this.props.auth}>\n            <BasePage>\n              <h1>\n                You are not authorized. You dont have permission to visit this\n                page{' '}\n              </h1>\n            </BasePage>\n          </BaseLayout>\n        );\n      } else {\n        return <Component {...this.props} />;\n      }\n    }\n\n    render() {\n      return this.renderProtectedPage();\n    }\n  };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AAUA;AACA;AACA;AACA;AAhDA;AAAA;AAAA;AAmDA;AACA;AApDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAGA;AAHA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}